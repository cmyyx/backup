# 基本设置
port: 7890                # HTTP代理端口
socks-port: 7891          # SOCKS代理端口
allow-lan: false           # 允许局域网连接
bind-address: "*"         # 绑定地址，* 表示所有地址
mode: rule                # 代理模式，rule表示规则模式
log-level: info           # 日志级别
ipv6: false
# 外部控制配置
# external-controller: 127.0.0.1:9090 # 允许通过 RESTful API 或 Web 界面（如 Clash Dashboard）在本地控制 Clash
# secret:    建议设置  #外部控制,api访问密钥，确保只有知道密码的人才能控制 Clash
# 性能优化
unified-delay: true       # 更换延迟计算方式，去除握手等额外延迟
tcp-concurrent: true      # 启用 TCP 并发连接。这允许 Clash 同时建立多个 TCP 连接，可以提高网络性能和连接速度

find-process-mode: strict  # 设置进程查找模式为严格模式，Clash 会更精确地识别和匹配网络流量来源的进程
global-client-fingerprint: chrome  # 设置全局客户端指纹为 Chrome，使 Clash 在建立连接时模拟 Chrome 浏览器的 TLS 指纹，增强隐私性和绕过某些网站的指纹检测
# Profile Enhancement Merge Template for Clash Verge, Adapted for Sub-Store

proxy-groups:
  - name: 节点选择
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Proxy.png
    type: select
    proxies:
      - 自动选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
  - name: 手动切换
    icon: https://cdn.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/select.png
    include-all: true
    type: select
  - name: 自动选择
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Auto.png
    type: url-test
    include-all: true
    exclude-filter: (?i)家宽|家庭|商宽|落地
    interval: 300
    tolerance: 20
    lazy: false
  - name: 人工智能
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bot.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: 加密货币
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cryptocurrency_3.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: Telegram
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: Google
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: YouTube
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: Netflix
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netflix.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: TikTok
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/TikTok.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: E-Hentai
    icon: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/icons/Ehentai.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: PikPak
    icon: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/icons/PikPak.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: 巴哈姆特
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bahamut.png
    type: select
    proxies:
      - 台湾节点
      - 节点选择
      - 手动切换
      - 全球直连
  - name: 哔哩哔哩
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/bilibili.png
    type: select
    proxies:
      - 全球直连
      - 台湾节点
      - 香港节点
  - name: 懂王社媒
    icon: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/icons/TruthSocial.png
    type: select
    proxies:
      - 美国节点
      - 加拿大节点
      - 节点选择
      - 手动切换
  - name: 学术资源
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Scholar.png
    type: select
    proxies:
      - 节点选择
      - 手动切换
      - 全球直连
  - name: 游戏平台
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Game.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: 微软服务
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Microsoft.png
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: 静态资源
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cloudflare.png
    type: select
    include-all: true
    proxies:
      - 节点选择
      - 自动选择
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: FCM推送
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png
    type: select
    proxies:
      - 全球直连
      - 节点选择
  - name: Steam修复
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Steam.png
    type: select
    proxies:
      - 全球直连
      - 游戏平台
      - 节点选择
  - name: Play商店修复
    icon: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/icons/GooglePlay.png
    type: select
    proxies:
      - 全球直连
      - 节点选择
  - name: 全球直连
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Direct.png
    type: select
    proxies:
      - DIRECT
      - 节点选择
  - name: 广告拦截
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/AdBlack.png
    type: select
    proxies:
      - REJECT
      - 全球直连
  - name: 漏网之鱼
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png
    type: select
    proxies:
      - 节点选择
      - 全球直连
  - name: 故障转移
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Available_1.png
    type: fallback
    lazy: false
    proxies:
      - 台湾节点
      - 香港节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点
      - 手动切换
      - 全球直连
  - name: 香港节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png
    include-all: true
    filter: (?i)港|HK|hk|Hong Kong|HongKong|hongkong
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 台湾节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png
    include-all: true
    filter: (?i)台|新北|彰化|TW|Taiwan
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 狮城节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png
    include-all: true
    filter: (?i)新加坡|坡|狮城|SG|Singapore
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 日本节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png
    include-all: true
    filter: (?i)日本|川日|东京|大阪|泉日|埼玉|沪日|深日|JP|Japan
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 韩国节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Korea.png
    include-all: true
    filter: (?i)KR|Korea|KOR|首尔|韩|韓
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 美国节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png
    include-all: true
    filter: (?i)美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United States
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 加拿大节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Canada.png
    include-all: true
    filter: (?i)加拿大|多伦多|Toronto|温哥华|Vancouver|蒙特利尔|Montreal|卡尔加里|Calgary|渥太华|Ottawa
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 英国节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_Kingdom.png
    include-all: true
    filter: (?i)英国|UK|GB|伦敦|London|曼彻斯特|Manchester|伯明翰|Birmingham|利物浦|Liverpool|谢菲联|Sheffield
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 澳洲节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Australia.png
    include-all: true
    filter: (?i)澳洲|悉尼|墨尔本|布里斯班|堪培拉|黄金海岸|珀斯|阿德莱德|澳大利亚|AU|Australia
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: url-test
    interval: 300
    tolerance: 20
    lazy: false
  - name: 欧盟节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/European_Union.png
    include-all: true
    filter: (奥地利|Austria|AUT|AT|维也纳|Vienna|比利时|Belgium|BEL|BE|布鲁塞尔|Brussels|根特|Ghent|安特卫普|Antwerp|保加利亚|Bulgaria|BGR|BG|索菲亚|Sofia|克罗地亚|Croatia|HRV|HR|萨格勒布|Zagreb|塞浦路斯|Cyprus|CYP|CY|尼科西亚|Nicosia|捷克|Czechia|Czech|CZE|CZ|布拉格|Prague|丹麦|Denmark|DNK|DK|哥本哈根|Copenhagen|欧登塞|Odense|爱沙尼亚|Estonia|EST|EE|塔林|Tallinn|芬兰|Finland|FIN|FI|赫尔辛基|Helsinki|法国|France|FRA|FR|巴黎|Paris|马赛|Marseille|里昂|Lyon|德国|Germany|DEU|DE|法兰克福|Frankfurt|柏林|Berlin|慕尼黑|Munich|杜塞尔多夫|Dusseldorf|汉堡|Hamburg|希腊|Greece|GRC|EL|GR|雅典|Athens|匈牙利|Hungary|HUN|HU|布达佩斯|Budapest|爱尔兰|Ireland|IRL|IE|都柏林|Dublin|意大利|Italy|ITA|IT|米兰|Milan|罗马|Rome|拉脱维亚|Latvia|LVA|LV|里加|Riga|立陶宛|Lithuania|LTU|LT|维尔纽斯|Vilnius|卢森堡|Luxembourg|LUX|LU|卢森堡市|卢森堡|马耳他|Malta|MLT|MT|瓦莱塔|Valletta|荷兰|Netherlands|NLD|NL|阿姆斯特丹|Amsterdam|鹿特丹|Rotterdam|波兰|Poland|POL|PL|华沙|Warsaw|克拉科夫|Krakow|葡萄牙|Portugal|PRT|PT|里斯本|Lisbon|波尔图|Porto|罗马尼亚|Romania|ROU|RO|布加勒斯特|Bucharest|斯洛伐克|Slovakia|SVK|SK|布拉迪斯拉发|Bratislava|斯洛文尼亚|Slovenia|SVN|SI|卢布尔雅那|Ljubljana|西班牙|Spain|ESP|ES|马德里|Madrid|巴塞罗那|Barcelona|瑞典|Sweden|SWE|SE|斯德哥尔摩|Stockholm|马尔默|Malmö|Malmo)
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: select
  - name: 非洲节点
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Africa_Map.png
    include-all: true
    filter: (?i)非洲|Africa|南非|South Africa|埃及|Egypt|开罗|Cairo|尼日利亚|Nigeria|拉各斯|Lagos
    exclude-filter: (?i)家宽|家庭|商宽|落地
    type: select
  - name: GLOBAL
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png
    include-all: true
    type: select
    proxies:
      - 节点选择
      - 手动切换
      - 自动选择
      - 人工智能
      - 加密货币
      - Telegram
      - Google
      - YouTube
      - Netflix
      - TikTok
      - E-Hentai
      - PikPak
      - 巴哈姆特
      - 哔哩哔哩
      - 懂王社媒
      - 学术资源
      - 游戏平台
      - 微软服务
      - 静态资源
      - FCM推送
      - Steam修复
      - Play商店修复
      - 全球直连
      - 广告拦截
      - 漏网之鱼
      - 故障转移
      - 香港节点
      - 台湾节点
      - 狮城节点
      - 日本节点
      - 韩国节点
      - 美国节点
      - 英国节点
      - 加拿大节点
      - 澳洲节点
      - 欧盟节点
      - 非洲节点

rule-providers:
  ADBlock:
    type: http
    behavior: domain
    format: text
    interval: 86400
    url: https://adrules.top/adrules_domainset.txt
    path: ./ADBlock.txt
  Microsoft:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft.txt
    path: ./sukkaw_ruleset/microsoft_non_ip.txt
  TruthSocial:
    url: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/TruthSocial.list
    path: ./ruleset/TruthSocial.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  cdn_domainset:
    type: http
    behavior: domain
    format: text
    interval: 86400
    url: https://ruleset.skk.moe/Clash/domainset/cdn.txt
    path: ./sukkaw_ruleset/cdn_domainset.txt
  cdn_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://ruleset.skk.moe/Clash/non_ip/cdn.txt
    path: ./sukkaw_ruleset/cdn_non_ip.txt
  apple_cdn:
    type: http
    behavior: domain
    format: text
    interval: 86400
    url: https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt
    path: ./sukkaw_ruleset/apple_cdn.txt
  microsoft_cdn_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt
    path: ./sukkaw_ruleset/microsoft_cdn_non_ip.txt
  ai_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://ruleset.skk.moe/Clash/non_ip/ai.txt
    path: ./sukkaw_ruleset/ai_non_ip.txt
  TikTok:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/TikTok.list
    path: ./ruleset/TikTok.list
  EHentai:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/EHentai.list
    path: ./ruleset/EHentai.list
  PlayStoreFix:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/GooglePlayStoreFix.list
    path: ./ruleset/GooglePlayStoreFix.list
  SteamFix:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/SteamFix.list
  GoogleFCM:
    type: http
    behavior: classical
    interval: 86400
    format: text
    path: ./ruleset/FirebaseCloudMessaging.list
    url: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/FirebaseCloudMessaging.list
  AdditionalFilter:
    type: http
    behavior: classical
    format: text
    interval: 86400
    path: ./ruleset/AdditionalFilter.list
    url: https://cdn.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/AdditionalFilter.list
  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400
  ProxyGFWlist:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list"
    path: ./ruleset/BanEasyList.yaml
    interval: 86400
  ChinaDomain:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/ChinaDomain.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list"
    interval: 86400
  China: 
    type: http
    behavior: classical
    format: yaml
    path: ./rules/China.yaml
    url: "https://cdn.jsdelivr.net/gh/zuluion/Clash-Template-Config@master/Filter/China.yaml"
    interval: 86400

rules:
# 1. 最高优先级：处理局域网、私有地址和广告拦截，必须放在最前面
  - GEOIP,LAN,全球直连,no-resolve
  - GEOIP,PRIVATE,全球直连,no-resolve
  - RULE-SET,ADBlock,广告拦截,no-resolve
  - RULE-SET,AdditionalFilter,广告拦截,no-resolve

# 2. 国内域名和IP直连规则 (核心直连判断区)
  - GEOSITE,geolocation-cn,全球直连,no-resolve  # 核心国内域名规则
  - GEOSITE,CN,全球直连,no-resolve             # 对 geolocation-cn 的补充
  - GEOSITE,BILIBILI,哔哩哔哩,no-resolve         # B站是国内服务，应直连
  - GEOSITE,GOOGLE-PLAY@CN,全球直连,no-resolve
  - GEOSITE,YOUTUBE@CN,全球直连,no-resolve
  - GEOSITE,CATEGORY-GAMES@CN,全球直连,no-resolve
  - GEOSITE,CATEGORY-SCHOLAR-CN,全球直连,no-resolve
  - RULE-SET,ChinaDomain,全球直连,no-resolve
  - RULE-SET,China,全球直连,no-resolve
  - RULE-SET,apple_cdn,全球直连,no-resolve
  - RULE-SET,microsoft_cdn_non_ip,全球直连,no-resolve
  - GEOIP,CN,全球直连,no-resolve

# 3. 国外服务代理规则 (如果流量没在上面被直连，则在这里判断)
  # 3.1 GFW 黑名单 (范围最广的代理规则)
  - GEOSITE,gfw,节点选择
  - RULE-SET,gfw,节点选择
  - RULE-SET,ProxyGFWlist,节点选择
  # 3.2 特定服务/应用规则
  - RULE-SET,TruthSocial,懂王社媒
  - RULE-SET,Microsoft,微软服务
  - RULE-SET,EHentai,E-Hentai
  - RULE-SET,TikTok,TikTok
  - RULE-SET,SteamFix,Steam修复
  - RULE-SET,PlayStoreFix,Play商店修复
  - RULE-SET,GoogleFCM,FCM推送
  - RULE-SET,ai_non_ip,人工智能
  - GEOSITE,NETFLIX,Netflix
  - GEOSITE,BAHAMUT,巴哈姆特
  - GEOSITE,CATEGORY-CRYPTOCURRENCY,加密货币
  - GEOSITE,TELEGRAM,Telegram
  - GEOSITE,PIKPAK,PikPak
  - GEOSITE,GOOGLE,Google
  - GEOSITE,YOUTUBE,YouTube
  - GEOSITE,CATEGORY-GAMES,游戏平台
  - GEOSITE,CATEGORY-SCHOLAR-!CN,学术资源
  # 3.3 CDN 规则
  - RULE-SET,cdn_domainset,静态资源
  - RULE-SET,cdn_non_ip,静态资源

# 4. 基于IP的代理规则 (作为域名规则的补充)
  - GEOIP,NETFLIX,Netflix,no-resolve
  - GEOIP,GOOGLE,Google,no-resolve
  - GEOIP,TELEGRAM,Telegram,no-resolve

# 5. 最终兜底规则
  - MATCH,漏网之鱼

# DNS配置
dns:
  enable: true            # 启用 Clash 的 DNS 功能
  ipv6: false              # IPv6 DNS 解析
  listen: '0.0.0.0:53'    # DNS 服务器监听地址和端口，:53 表示监听所有接口的 53 端口
  enhanced-mode: fake-ip  # 设置增强模式为 fake-ip 模式，提高解析速度和连接性能
  fake-ip-range: 198.18.0.1/16  # 设置 fake-ip 的 IP 地址范围为 198.18.0.1/16
  use-hosts: true         # 启用 hosts 文件解析，Clash 会检查系统的 hosts 文件
  use-system-hosts: true  # 使用系统的 hosts 文件进行域名解析
  prefer-h3: true         # 如果DNS服务器支持DoH3会优先使用h3，提升性能
  respect-rules: true     # 让 DNS 解析遵循 Clash 的路由规则
  # 定义不使用虚假IP解析的域名列表
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com
    - '+.srv.nintendo.net'
    - '+.stun.playstation.net'
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
    - '+.xboxlive.com'
    - 'xbox.*.microsoft.com'
    - '*.battlenet.com.cn'
    - '*.battlenet.com'
    - '*.blzstatic.cn'
    - '*.battle.net'


  # 建议多写点 DNS （ clash 的机制是同时向所有 DNS 发起解析请求，用返回最快那个，后续的直接丢弃）
  # 用来解析 nameserver 和 fallback 里面的域名的，必须为 IP, 可为加密 DNS
  default-nameserver:
    - 8.8.8.8           # Google DNS
    - 1.1.1.1           # Cloudflare DNS
    - 119.29.29.29      # 腾讯DNSPod
    - 223.5.5.5         # 阿里DNS
    - 223.6.6.6         # 阿里DNS
    - 180.76.76.76      # 百度DNS

  # 用于direct出口域名解析的 DNS 服务器
  # 如果不填则遵循nameserver-policy、nameserver和fallback的配置
  direct-nameserver:
    - system
    - https://doh.pub/dns-query          #腾讯
    - https://dns.alidns.com/dns-query   #阿里
    - 114.114.114.114                    # 114
    - 114.114.115.115                    # 114
    - 101.226.4.6                        # 百度-电信
    - 123.125.81.6                       # 百度-联通
    - 180.76.76.76                       # 百度-联通
    - 112.124.47.27                      # OneDNS-南方
    - 114.215.126.16                     # OneDNS-北方
  nameserver:
    - https://8.8.8.8/dns-query
    - https://1.1.1.1/dns-query
  # 解析代理服务器域名的DNS服务器,就是节点本身中包含的域名
  # 代理节点域名解析服务器，仅用于解析代理节点的域名，如果不填则遵循nameserver-policy、nameserver和fallback的配置
  proxy-server-nameserver:
    - https://1.1.1.1/dns-query          # Cloudflare DNS
    - https://8.8.8.8/dns-query          # Google DNS
    - https://doh.pub/dns-query          #腾讯
    - https://dns.alidns.com/dns-query   #阿里
    - https://9.9.9.9/dns-query          #Quad9
    - https://208.67.222.222/dns-query   #OpenDNS

# 配置文件管理
profile:
  store-selected: true    # 保存用户选择的代理配置，在 Clash 重启后仍然记住上次选择的代理服务器
  store-fake-ip: true     # 适用于 Clash 在 Fake IP 模式下工作时。它会将域名到 Fake IP 的映射关系保存下来，确保 Clash 重启后依然能使用相同的 Fake IP 分配给相同的域名，保持连接的一致性和稳定性

# 域名嗅探
sniffer:
  enable: true            # 启用网络流量嗅探功能，允许 Clash 分析和识别流量类型
  sniff:
    TLS:
      ports: [443, 8443]  # 要嗅探的 TLS 流量端口，包括标准 HTTPS 端口 443 和常用的备用 HTTPS 端口 8443
    HTTP:
      ports: [80, 8080-8880]  # 要嗅探的 HTTP 流量端口，包括标准 HTTP 端口 80 和常用的 HTTP 端口范围 8080-8880
      override-destination: true  # 启用目标覆盖功能，允许 Clash 根据嗅探到的域名重写请求的目标地址

geodata-mode: true
geox-url:
  geoip: https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geoip.dat
  geosite: https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geosite.dat
  mmdb: https://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country.mmdb
  asn: https://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/GeoLite2-ASN.mmdb

tun:
  enable: true
  stack: mixed
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - tcp://any:53
  device: utun0
  mtu: 1500
  strict-route: true
  gso: true
  gso-max-size: 65536
  udp-timeout: 300
  iproute2-table-index: 2022
  iproute2-rule-index: 9000
  endpoint-independent-nat: false
  route-address-set:
    - ruleset-1
  route-exclude-address-set:
    - ruleset-2
  route-address:
    - 0.0.0.0/1
    - 128.0.0.0/1
    - "::/1"
    - "8000::/1"
  route-exclude-address:
    - 192.168.0.0/16
    - fc00::/7
  include-interface:
    - eth0
  exclude-interface:
    - eth1
  include-uid:
    - 0
  include-uid-range:
    - 1000:9999
  exclude-uid:
    - 1000
  exclude-uid-range:
    - 1000:9999
  include-android-user:
    - 0
    - 10
  include-package:
    - com.android.chrome
  exclude-package:
    - com.android.captiveportallogin